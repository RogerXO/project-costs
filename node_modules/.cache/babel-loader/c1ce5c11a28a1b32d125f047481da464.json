{"ast":null,"code":"import _slicedToArray from\"C:/Users/roger/OneDrive/Documents/programming/frontend/react/react-course-Matheus-Battisti/costs-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useLocation}from\"react-router-dom\";import{useState,useEffect}from\"react\";import styles from\"./Projects.module.css\";import Message from\"../layout/Message\";import Container from\"../layout/Container\";import LinkButton from\"../layout/LinkButton\";import ProjectCard from\"../project/ProjectCard\";import Loading from\"../layout/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Projects(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),removeLoading=_useState4[0],setRemoveLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),projectMessage=_useState6[0],setProjectMessage=_useState6[1];useEffect(function(){setTimeout(function(){fetch(\"http://localhost:5000/projects\",{method:\"GET\",headers:{\"Content-type\":\"application/json\"}}).then(function(resp){return resp.json();}).then(function(data){console.log(data);setProjects(data);setRemoveLoading(true);}).catch(function(err){return console.log(err);});},500);},[]);var location=useLocation();var message=\"\";if(location.state){message=location.state.message;}function removeProject(id){fetch(\"http://localhost:5000/projects/\".concat(id),{method:\"DELETE\",headers:{'Content-type':\"application.json\"}}).then(function(resp){return resp.json();}).then(function(){setProjects(projects.filter(function(project){return project.id!==id;}));setProjectMessage('Project removed successfully!');}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.projectContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.titleContainer,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My projects\"}),/*#__PURE__*/_jsx(LinkButton,{to:\"/newProject\",text:\"Create project\"})]}),message&&/*#__PURE__*/_jsx(Message,{msg:message,type:\"success\"}),projectMessage&&/*#__PURE__*/_jsx(Message,{msg:projectMessage,type:\"removed\"}),/*#__PURE__*/_jsxs(Container,{customClass:\"start\",children:[projects.length>0&&projects.map(function(project){return/*#__PURE__*/_jsx(ProjectCard,{name:project.name,id:project.id,budget:project.budget,category:project.category.name,handleRemove:removeProject},project.id);}),!removeLoading&&/*#__PURE__*/_jsx(Loading,{}),removeLoading&&projects.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"There is no project\"})]})]});}export default Projects;","map":{"version":3,"sources":["C:/Users/roger/OneDrive/Documents/programming/frontend/react/react-course-Matheus-Battisti/costs-project/src/components/pages/Projects.js"],"names":["useLocation","useState","useEffect","styles","Message","Container","LinkButton","ProjectCard","Loading","Projects","projects","setProjects","removeLoading","setRemoveLoading","projectMessage","setProjectMessage","setTimeout","fetch","method","headers","then","resp","json","data","console","log","catch","err","location","message","state","removeProject","id","filter","project","projectContainer","titleContainer","length","map","name","budget","category"],"mappings":"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","sourcesContent":["import { useLocation } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nimport styles from \"./Projects.module.css\";\r\n\r\nimport Message from \"../layout/Message\";\r\nimport Container from \"../layout/Container\";\r\nimport LinkButton from \"../layout/LinkButton\";\r\nimport ProjectCard from \"../project/ProjectCard\";\r\nimport Loading from \"../layout/Loading\";\r\n\r\nfunction Projects() {\r\n  const [projects, setProjects] = useState([]);\r\n  const [removeLoading, setRemoveLoading] = useState(false);\r\n  const [projectMessage, setProjectMessage] = useState('')\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      fetch(\"http://localhost:5000/projects\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((resp) => resp.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          setProjects(data);\r\n          setRemoveLoading(true);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }, 500);\r\n  }, []);\r\n\r\n  const location = useLocation();\r\n  let message = \"\";\r\n  if (location.state) {\r\n    message = location.state.message;\r\n  }\r\n\r\n  function removeProject(id) {\r\n    fetch(`http://localhost:5000/projects/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        'Content-type': \"application.json\"\r\n      }\r\n    }).then(resp => resp.json())\r\n    .then(() => {\r\n      setProjects(projects.filter((project) => project.id !== id))\r\n      setProjectMessage('Project removed successfully!')\r\n    })\r\n    .catch((err) => console.log(err))\r\n  }\r\n\r\n  return (\r\n    <div className={styles.projectContainer}>\r\n      <div className={styles.titleContainer}>\r\n        <h1>My projects</h1>\r\n        <LinkButton to=\"/newProject\" text=\"Create project\" />\r\n      </div>\r\n      {message && <Message msg={message} type=\"success\" />}\r\n      {projectMessage && <Message msg={projectMessage} type=\"removed\" />}\r\n      <Container customClass=\"start\">\r\n        {projects.length > 0 &&\r\n          projects.map((project) => (\r\n            <ProjectCard\r\n              name={project.name}\r\n              id={project.id}\r\n              budget={project.budget}\r\n              category={project.category.name}\r\n              key={project.id}\r\n              handleRemove={removeProject}\r\n            />\r\n          ))}\r\n        {!removeLoading && <Loading />}\r\n        {removeLoading && projects.length === 0 && <p>There is no project</p>}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Projects;\r\n"]},"metadata":{},"sourceType":"module"}